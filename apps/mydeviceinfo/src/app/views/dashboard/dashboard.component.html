<!--
  -----------------------------------------------------------------------------------
  DEVICE
  -----------------------------------------------------------------------------------
-->

<c-row>
  <c-col xs>
    <c-card class="mb-2">
      <c-card-header>
        <c-row>
          <c-col>
            <i class="bi bi-phone"></i>
            Device
          </c-col>
        </c-row>
      </c-card-header>

      <c-card-body class="pt-2 pb-2">
        <c-row>
          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">NAME</div>
              <div class="d-flex">
                <div class="" style="cursor: text">
                  {{ deviceInfo.info.name }}
                </div>
                <div class="d-flex ms-auto" style="cursor: pointer">
                  <button
                    cButton
                    color="secondary"
                    variant="ghost"
                    size="sm"
                    (click)="copyToClipboard($any(deviceInfo.info.name))"
                  >
                    <i class="bi bi-copy"></i>
                  </button>
                </div>
              </div>
            </ng-container>
          </c-col>

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">MANUFACTURER</div>

              <div class="d-flex">
                <div class="" style="cursor: text">
                  {{ deviceInfo.info.manufacturer }}
                </div>
                <div class="d-flex ms-auto" style="cursor: pointer">
                  <button
                    cButton
                    color="secondary"
                    variant="ghost"
                    size="sm"
                    (click)="
                      copyToClipboard($any(deviceInfo.info.manufacturer))
                    "
                  >
                    <i class="bi bi-copy"></i>
                  </button>
                </div>
              </div>
            </ng-container>
          </c-col>

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">MODEL</div>

              <div class="d-flex">
                <div class="" style="cursor: text">
                  {{ deviceInfo.info.model }}
                </div>
                <div class="d-flex ms-auto" style="cursor: pointer">
                  <button
                    cButton
                    color="secondary"
                    variant="ghost"
                    size="sm"
                    (click)="copyToClipboard($any(deviceInfo.info.model))"
                  >
                    <i class="bi bi-copy"></i>
                  </button>
                </div>
              </div>
            </ng-container>
          </c-col>

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container *ngIf="deviceInfo.id">
              <div class="text-medium-emphasis">UNIQUE ID</div>

              <div class="d-flex">
                <div class="" style="cursor: text">
                  {{ deviceInfo.id.identifier }}
                </div>
                <div class="d-flex ms-auto" style="cursor: pointer">
                  <button
                    cButton
                    color="secondary"
                    variant="ghost"
                    size="sm"
                    (click)="copyToClipboard($any(deviceInfo.id.identifier))"
                  >
                    <i class="bi bi-copy"></i>
                  </button>
                </div>
              </div>
            </ng-container>
          </c-col>

          <!--

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">WEB VIEW VERSION</div>
              <div class="">
                {{ deviceInfo.info.webViewVersion }}
              </div>
            </ng-container>
          </c-col>

          -->
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!--
  -----------------------------------------------------------------------------------
  OPERATING SYSTEM
  -----------------------------------------------------------------------------------
-->

<c-row>
  <c-col xs>
    <c-card class="mb-2">
      <c-card-header>
        <c-row>
          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <i
                class="bi"
                [class.bi-apple]="
                  deviceInfo.info.operatingSystem === 'ios' ||
                  deviceInfo.info.operatingSystem === 'mac'
                "
                [class.bi-android2]="
                  deviceInfo.info.operatingSystem === 'android'
                "
                [class.bi-microsoft]="
                  deviceInfo.info.operatingSystem === 'windows'
                "
                [class.bi-bug]="deviceInfo.info.operatingSystem === 'unknown'"
              >
              </i>
            </ng-container>
            Operating System
          </c-col>
        </c-row>
      </c-card-header>

      <c-card-body class="pt-2 pb-2">
        <c-row>
          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">OPERATING SYSTEM</div>
              <div class="">
                {{ deviceInfo.info.operatingSystem }}
              </div>
            </ng-container>
          </c-col>

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">O.S. VERSION</div>
              <div class="">
                {{ deviceInfo.info.osVersion }}
              </div>
            </ng-container>
          </c-col>

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-medium-emphasis">PLATFORM</div>
              <div class="">
                {{ deviceInfo.info.platform }}
              </div>
            </ng-container>
          </c-col>

          <hr class="mt-1 mb-1" />

          <c-col>
            <ng-container
              *ngIf="deviceInfo.languageCode && deviceInfo.languageTag"
            >
              <div class="text-medium-emphasis">LANGUAGE</div>
              <div class="">
                <span *ngIf="deviceInfo.languageCode.value === 'es'"
                  >Spanish</span
                >
                <span *ngIf="deviceInfo.languageCode.value === 'en'"
                  >English</span
                >
                <span
                  *ngIf="
                    deviceInfo.languageCode.value !== 'es' &&
                    deviceInfo.languageCode.value !== 'en'
                  "
                >
                  {{ deviceInfo.languageCode.value }}
                </span>
                (<span>{{ deviceInfo.languageTag.value }}</span
                >)
              </div>
            </ng-container>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!--
  -----------------------------------------------------------------------------------
  BATTERY
  -----------------------------------------------------------------------------------
-->

<c-row>
  <c-col xs>
    <c-card class="mb-2">
      <c-card-header>
        <c-row>
          <c-col>
            <ng-container *ngIf="deviceInfo.batteryInfo">
              <i
                class="bi bi-rotate-270"
                [class.bi-battery-charging]="deviceInfo.batteryInfo.isCharging"
                [class.bi-battery]="
                  !deviceInfo.batteryInfo.isCharging &&
                  isInRange(deviceInfo.batteryInfo.batteryLevel, 0.0, 0.15)
                "
                [class.bi-battery-half]="
                  !deviceInfo.batteryInfo.isCharging &&
                  isInRange(deviceInfo.batteryInfo.batteryLevel, 0.15, 0.85)
                "
                [class.bi-battery-full]="
                  !deviceInfo.batteryInfo.isCharging &&
                  isInRange(deviceInfo.batteryInfo.batteryLevel, 0.85, 1.0)
                "
              ></i>
            </ng-container>
            Battery
          </c-col>
        </c-row>
      </c-card-header>

      <c-card-body class="pt-2 pb-2">
        <c-row>
          <c-col>
            <div class="progress-group-prepend" *ngIf="deviceInfo.batteryInfo">
              <span
                class="text-medium-emphasis"
                *ngIf="deviceInfo.batteryInfo.isCharging"
              >
                Connected
              </span>
              <span
                class="text-medium-emphasis"
                *ngIf="!deviceInfo.batteryInfo.isCharging"
              >
                Disconnected
              </span>
            </div>
          </c-col>
          <c-col>
            <ng-container *ngIf="deviceInfo.batteryInfo">
              <c-progress class="mt-1">
                <c-progress-bar
                  color="danger"
                  *ngIf="
                    isInRange(deviceInfo.batteryInfo.batteryLevel, 0, 0.15)
                  "
                  [value]="
                    getBatteryPercent(deviceInfo.batteryInfo.batteryLevel)
                  "
                ></c-progress-bar>
                <c-progress-bar
                  color="warning"
                  *ngIf="
                    isInRange(deviceInfo.batteryInfo.batteryLevel, 0.15, 0.5)
                  "
                  [value]="
                    getBatteryPercent(deviceInfo.batteryInfo.batteryLevel)
                  "
                ></c-progress-bar>
                <c-progress-bar
                  color="info"
                  *ngIf="
                    isInRange(deviceInfo.batteryInfo.batteryLevel, 0.5, 0.85)
                  "
                  [value]="
                    getBatteryPercent(deviceInfo.batteryInfo.batteryLevel)
                  "
                ></c-progress-bar>
                <c-progress-bar
                  color="success"
                  *ngIf="
                    isInRange(deviceInfo.batteryInfo.batteryLevel, 0.85, 1.0)
                  "
                  [value]="
                    getBatteryPercent(deviceInfo.batteryInfo.batteryLevel)
                  "
                ></c-progress-bar>
              </c-progress>
            </ng-container>
          </c-col>
          <c-col md="12" xl="12" xs="12">
            <ng-container *ngIf="deviceInfo.batteryInfo">
              <div class="text-end">
                {{ getBatteryPercent(deviceInfo.batteryInfo.batteryLevel) }}%
                available
              </div>
            </ng-container>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!--
-----------------------------------------------------------------------------------
DISK
-----------------------------------------------------------------------------------
-->

<c-row>
  <c-col xs>
    <c-card class="mb-2">
      <c-card-header>
        <c-row>
          <c-col>
            <i class="bi bi-hdd"></i>
            Disk
          </c-col>
        </c-row>
      </c-card-header>

      <c-card-body class="pt-2 pb-2">
        <c-row>
          <c-col [xs]="5">
            <div class="">
              <div class="row">
                <div class="text-medium-emphasis">APK</div>
              </div>
              <div class="row">
                <span class="text-end">
                  {{
                    getDiskSpaceInKB(deviceInfo.diskInfo.app) | number : '1.2-2'
                  }}
                  KB
                  <i class="bi bi-circle-fill fs-6 text-success"></i>
                </span>
              </div>
            </div>

            <hr class="mt-1 mb-1" />

            <div class="">
              <div class="row">
                <div class="text-medium-emphasis">OTHERS</div>
              </div>
              <div class="row">
                <span class="text-end">
                  {{
                    getDiskSpaceInGB(
                      deviceInfo.diskInfo.total -
                        deviceInfo.diskInfo.app -
                        deviceInfo.diskInfo.free
                    ) | number : '1.2-2'
                  }}
                  GB
                  <i class="bi bi-circle-fill fs-6 text-danger"></i>
                </span>
              </div>
            </div>

            <hr class="mt-1 mb-1" />

            <div class="">
              <div class="row">
                <div class="text-medium-emphasis">FREE</div>
              </div>
              <div class="row">
                <span class="text-end">
                  {{
                    getDiskSpaceInGB(deviceInfo.diskInfo.free)
                      | number : '1.2-2'
                  }}
                  GB
                  <i class="bi bi-circle-fill fs-6 text-info"></i>
                </span>
              </div>
            </div>

            <hr class="mt-1 mb-1" />

            <div class="">
              <div class="row">
                <div class="text-medium-emphasis">TOTAL</div>
              </div>
              <div class="row">
                <span class="text-end">
                  {{ getDiskSpaceInGB(deviceInfo.diskInfo.total) }} GB
                  <i class="bi bi-circle fs-6 text-secondary"></i>
                </span>
              </div>
            </div>
          </c-col>

          <c-col [xs]="7" class="justify-content-center">
            <ng-container>
              <c-chart
                class="mt-4"
                [ngStyle]="{ 'maxHeight.px': 250 }"
                [data]="utilData.diskData.data"
                [options]="utilData.diskData.options"
                [type]="utilData.diskData.type"
              ></c-chart>
            </ng-container>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!--
-----------------------------------------------------------------------------------
MEMORY
-----------------------------------------------------------------------------------
-->

<c-row>
  <c-col xs>
    <c-card class="mb-2">
      <c-card-header>
        <c-row>
          <c-col>
            <i class="bi bi-memory"></i>
            Memory
          </c-col>
        </c-row>
      </c-card-header>

      <c-card-body class="pt-2 pb-2">
        <c-row>
          <c-col>
            <ng-container>
              <c-chart
                [ngStyle]="{ 'marginTop.px': 0 }"
                [data]="utilData.memoryData.data"
                [options]="utilData.memoryData.options"
                [type]="utilData.memoryData.type"
              ></c-chart>
            </ng-container>
            <hr class="mt-1 mb-1" />
            <ng-container *ngIf="deviceInfo.info">
              <div class="text-end">
                Memory Used: {{ getMemoryUsed(deviceInfo.info.memUsed) }} MB
              </div>
            </ng-container>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
